{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Etsy Integration for ERPNext","text":"Legal Disclaimer <p>\"Etsy\" is a trademark of Etsy, Inc. This application uses the Etsy API but is not endorsed, certified, or affiliated with Etsy, Inc. in any way. This software is provided \"as is\" under the GPL-3.0 license, without warranty of any kind, express or implied. The authors and contributors accept no liability for any damages, data loss, account suspension, or other consequences arising from the use or misuse of this software. Use of the Etsy API is subject to Etsy's API Terms of Use \u2014 you are solely responsible for compliance.</p> <p>Welcome to the official documentation for the ERPNext Etsy Integration app. This Frappe framework application seamlessly synchronizes your Etsy shop data with ERPNext, automating your e-commerce workflows.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Ready to get started? Follow our Getting Started guide to install the app, connect your Etsy shop, and import your first data in minutes.</p>"},{"location":"#overview","title":"Overview","text":"<p>The Etsy Integration app connects your Etsy shop(s) to ERPNext, enabling automatic synchronization of:</p> <ul> <li>Orders &amp; Receipts \u2014 Sales Orders, Sales Invoices, and Payment Entries</li> <li>Customers &amp; Contacts \u2014 Buyer information and addresses</li> <li>Listings &amp; Items \u2014 Product catalog with variants and attributes</li> </ul> <p>Built on the Frappe framework and designed specifically for ERPNext v15, this integration uses Etsy's official API v3 with secure OAuth2 authentication.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Sales Order Automation \u2014 Import Etsy orders as complete Sales Orders with Customers, Invoices, and Payment Entries</li> <li>Listing Management \u2014 Sync product listings with automatic Item Template, Variant, and Attribute creation</li> <li>Multi-Shop Support \u2014 Manage multiple Etsy shops from a single ERPNext instance with independent configuration</li> <li>Flexible Sync \u2014 Manual on-demand imports, scheduled background jobs, or bulk historical imports</li> <li>Secure Auth \u2014 OAuth 2.0 PKCE flow with automatic token refresh</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li>Prerequisites &amp; Installation \u2014 Install the app via Frappe Bench</li> <li>Setup Your First Etsy Shop \u2014 Create and configure an Etsy Shop in ERPNext</li> <li>Connect to Etsy API \u2014 Create an Etsy Personal App and authenticate</li> <li>First Import &amp; Next Steps \u2014 Import data and enable automatic sync</li> <li>User Guide \u2014 In-depth configuration, features, and troubleshooting</li> <li>Developer Guide \u2014 Contributing, code style, and development setup</li> </ul>"},{"location":"#support","title":"Support","text":"<ul> <li>Issues: Report bugs and request features on GitHub Issues</li> <li>Repository: github.com/maeurerdev/erpnext-etsy</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the GNU General Public License (v3).</p>"},{"location":"developer-guide/contributing/","title":"Contributing","text":"<p>This guide covers development setup, code style, testing, and contributing to the Etsy Integration project.</p>"},{"location":"developer-guide/contributing/#development-setup","title":"Development Setup","text":""},{"location":"developer-guide/contributing/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python: 3.10 or higher</li> <li>Frappe Framework: Latest compatible version</li> <li>ERPNext: Version 15</li> <li>Git: For version control</li> <li>MariaDB/PostgreSQL: Database</li> <li>Redis: For caching and background jobs</li> </ul>"},{"location":"developer-guide/contributing/#setting-up-development-environment","title":"Setting Up Development Environment","text":""},{"location":"developer-guide/contributing/#1-clone-the-repository","title":"1. Clone the Repository","text":"<pre><code>cd /path/to/your/bench\nbench get-app https://github.com/maeurerdev/erpnext-etsy --branch develop\n</code></pre> <p>Or for direct development:</p> <pre><code>cd apps\ngit clone https://github.com/maeurerdev/erpnext-etsy.git etsy\ncd ..\n</code></pre>"},{"location":"developer-guide/contributing/#2-install-the-app","title":"2. Install the App","text":"<pre><code>bench --site development.localhost install-app etsy\n</code></pre>"},{"location":"developer-guide/contributing/#3-install-development-dependencies","title":"3. Install Development Dependencies","text":"<pre><code>cd apps/etsy\npip install -e \".[dev]\"  # If dev dependencies are defined in setup.py\n</code></pre>"},{"location":"developer-guide/contributing/#4-set-up-pre-commit-hooks","title":"4. Set Up Pre-commit Hooks","text":"<p>The project uses pre-commit hooks for code quality:</p> <pre><code>pre-commit install\n</code></pre> <p>Run hooks manually:</p> <pre><code>pre-commit run --all-files\n</code></pre>"},{"location":"developer-guide/contributing/#development-commands","title":"Development Commands","text":"<p>Navigate to your bench directory for all commands:</p> <pre><code>cd /workspace/development/frappe-bench\n</code></pre>"},{"location":"developer-guide/contributing/#installuninstall-app","title":"Install/Uninstall App","text":"<pre><code># Install\nbench --site development.localhost install-app etsy\n\n# Uninstall (without backup)\nbench --site development.localhost uninstall-app etsy --no-backup\n</code></pre>"},{"location":"developer-guide/contributing/#run-tests","title":"Run Tests","text":"<pre><code># Run all tests for the app\nbench run-tests --app etsy\n\n# Run a specific test module\nbench run-tests --app etsy --module etsy.etsy.doctype.etsy_shop.test_etsy_shop\n\n# Run a specific test class\nbench run-tests --app etsy --test TestEtsyShop\n\n# With verbose output\nbench run-tests --app etsy --verbose\n\n# With coverage report\nbench run-tests --app etsy --coverage\n</code></pre>"},{"location":"developer-guide/contributing/#build-assets","title":"Build Assets","text":"<pre><code># Build all assets\nbench build --app etsy\n\n# Watch for changes (during development)\nbench watch\n</code></pre>"},{"location":"developer-guide/contributing/#run-linters","title":"Run Linters","text":"<pre><code># Run all pre-commit hooks\npre-commit run --all-files\n\n# Run Ruff linter only\nruff check etsy/\n\n# Auto-fix issues\nruff check --fix etsy/\n</code></pre>"},{"location":"developer-guide/contributing/#database-migrations","title":"Database Migrations","text":"<p>After changing doctype schemas:</p> <pre><code>bench migrate\n</code></pre>"},{"location":"developer-guide/contributing/#console-access","title":"Console Access","text":"<p>For debugging and testing:</p> <pre><code>bench --site development.localhost console\n</code></pre> <pre><code># Example: Test API connection\nimport frappe\nshop = frappe.get_doc(\"Etsy Shop\", \"Your Shop Name\")\nfrom etsy.api import EtsyAPI\napi = EtsyAPI(shop)\nprint(api.getMe())\n</code></pre>"},{"location":"developer-guide/contributing/#code-style","title":"Code Style","text":"<p>The project follows strict code style guidelines enforced by linters.</p>"},{"location":"developer-guide/contributing/#python","title":"Python","text":"<p>Linter: Ruff</p> <p>Rules:</p> <ul> <li>Indentation: Tabs</li> <li>Quotes: Double quotes</li> <li>Line Length: 110 characters</li> <li>Target: Python 3.10</li> <li>Lint Rules: F (pyflakes), E (pycodestyle errors), W (pycodestyle warnings), I (isort), UP (pyupgrade), B (flake8-bugbear), RUF (ruff-specific)</li> </ul> <p>Example:</p> <pre><code>def example_function(param1: str, param2: int) -&gt; dict:\n    \"\"\"\n    Docstring with proper formatting.\n\n    Args:\n        param1: Description\n        param2: Description\n\n    Returns:\n        Description of return value\n    \"\"\"\n    result = {\n        \"key\": \"value\",\n        \"number\": param2,\n    }\n    return result\n</code></pre>"},{"location":"developer-guide/contributing/#javascript","title":"JavaScript","text":"<p>Linter: ESLint + Prettier</p> <p>Rules:</p> <ul> <li>Indentation: Tabs (size 4)</li> <li>Quotes: Double quotes preferred</li> <li>Target: ES2022</li> <li>Naming: Snake_case acceptable (Frappe convention)</li> </ul> <p>Example:</p> <pre><code>frappe.ui.form.on(\"Etsy Shop\", {\n    refresh: function(frm) {\n        if (frm.doc.status === \"Connected\") {\n            frm.add_custom_button(__(\"Import Listings\"), function() {\n                frm.call(\"import_listings\");\n            });\n        }\n    }\n});\n</code></pre>"},{"location":"developer-guide/contributing/#editorconfig","title":"EditorConfig","text":"<p>The project includes <code>.editorconfig</code> for consistent editor settings:</p> <ul> <li>Charset: UTF-8</li> <li>Line Endings: LF</li> <li>Trim Trailing Whitespace: Yes</li> <li>Insert Final Newline: Yes</li> <li>Indentation: Tabs (except JSON: 2 spaces)</li> </ul>"},{"location":"developer-guide/contributing/#project-structure","title":"Project Structure","text":"<pre><code>etsy/\n\u251c\u2500\u2500 api.py              # HTTP client and API wrapper\n\u251c\u2500\u2500 datastruct.py       # Pydantic models for Etsy API responses\n\u251c\u2500\u2500 hooks.py            # Frappe hooks and custom fields\n\u251c\u2500\u2500 install.py          # Installation and uninstallation routines\n\u2514\u2500\u2500 etsy/\n    \u2514\u2500\u2500 doctype/\n        \u251c\u2500\u2500 etsy_shop/        # Main doctype for shop management\n        \u251c\u2500\u2500 etsy_settings/    # Global sync settings\n        \u2514\u2500\u2500 etsy_listing/     # Per-listing configuration\n</code></pre>"},{"location":"developer-guide/contributing/#testing","title":"Testing","text":""},{"location":"developer-guide/contributing/#test-structure","title":"Test Structure","text":"<p>Tests are located in doctype directories:</p> <pre><code>etsy/etsy/doctype/etsy_shop/\n\u251c\u2500\u2500 etsy_shop.py\n\u251c\u2500\u2500 etsy_shop.json\n\u251c\u2500\u2500 etsy_shop.js\n\u2514\u2500\u2500 test_etsy_shop.py    # Test file\n</code></pre>"},{"location":"developer-guide/contributing/#writing-tests","title":"Writing Tests","text":"<p>Example Test:</p> <pre><code>import frappe\nimport unittest\n\nclass TestEtsyShop(unittest.TestCase):\n    def setUp(self):\n        \"\"\"Set up test fixtures\"\"\"\n        self.shop = frappe.get_doc({\n            \"doctype\": \"Etsy Shop\",\n            \"shop_name\": \"Test Shop\",\n            \"company\": \"_Test Company\",\n            # ... other required fields\n        })\n        self.shop.insert()\n\n    def tearDown(self):\n        \"\"\"Clean up after tests\"\"\"\n        frappe.delete_doc(\"Etsy Shop\", \"Test Shop\", force=True)\n\n    def test_shop_creation(self):\n        \"\"\"Test shop document creation\"\"\"\n        self.assertEqual(self.shop.shop_name, \"Test Shop\")\n        self.assertEqual(self.shop.status, \"Disconnected\")\n\n    def test_auth_header_generation(self):\n        \"\"\"Test OAuth header generation\"\"\"\n        self.shop.access_token = \"test_token\"\n        header = self.shop.get_auth_header()\n        self.assertEqual(header[\"Authorization\"], \"Bearer test_token\")\n</code></pre>"},{"location":"developer-guide/contributing/#mocking-external-apis","title":"Mocking External APIs","text":"<p>For testing API interactions without hitting Etsy:</p> <pre><code>from unittest.mock import patch, MagicMock\n\nclass TestEtsyAPI(unittest.TestCase):\n    @patch('etsy.api.SyncCacheClient')\n    def test_get_me(self, mock_client):\n        \"\"\"Test getMe API call\"\"\"\n        # Mock the response\n        mock_response = MagicMock()\n        mock_response.json.return_value = {\n            \"user_id\": 12345,\n            \"login_name\": \"test_user\",\n            \"primary_email\": \"test@example.com\"\n        }\n        mock_client.return_value.get.return_value = mock_response\n\n        # Test the API call\n        from etsy.api import EtsyAPI\n        api = EtsyAPI(self.shop)\n        result = api.getMe()\n\n        self.assertEqual(result.user_id, 12345)\n</code></pre>"},{"location":"developer-guide/contributing/#contributing-workflow","title":"Contributing Workflow","text":"<ol> <li>Fork the Repository</li> <li> <p>Fork on GitHub: maeurerdev/erpnext-etsy</p> </li> <li> <p>Create a Feature Branch <pre><code>git checkout -b feature/your-feature-name\n</code></pre></p> </li> <li> <p>Make Changes</p> </li> <li>Write code following style guidelines</li> <li>Add tests for new features</li> <li> <p>Update documentation if needed</p> </li> <li> <p>Run Tests and Linters <pre><code>pre-commit run --all-files\nbench run-tests --app etsy\n</code></pre></p> </li> <li> <p>Commit Changes <pre><code>git add .\ngit commit -m \"feat: Add new feature description\"\n</code></pre></p> </li> <li> <p>Push to Your Fork <pre><code>git push origin feature/your-feature-name\n</code></pre></p> </li> <li> <p>Create Pull Request</p> </li> <li>Open PR on GitHub</li> <li>Provide clear description</li> <li>Reference any related issues</li> </ol>"},{"location":"developer-guide/contributing/#commit-message-convention","title":"Commit Message Convention","text":"<p>Follow conventional commits:</p> <p>Format: <code>type(scope): description</code></p> <p>Types:</p> <ul> <li><code>feat</code>: New feature</li> <li><code>fix</code>: Bug fix</li> <li><code>docs</code>: Documentation changes</li> <li><code>style</code>: Code style changes (formatting, no logic change)</li> <li><code>refactor</code>: Code refactoring</li> <li><code>test</code>: Adding or updating tests</li> <li><code>chore</code>: Maintenance tasks</li> </ul> <p>Examples: <pre><code>feat(api): Add support for listing variants\nfix(sync): Handle missing item gracefully\ndocs(readme): Update installation instructions\ntest(shop): Add OAuth flow tests\n</code></pre></p>"},{"location":"developer-guide/contributing/#pull-request-guidelines","title":"Pull Request Guidelines","text":"<p>Good PR:</p> <ul> <li>Clear, descriptive title</li> <li>Detailed description of changes</li> <li>References related issues (#123)</li> <li>Includes tests for new features</li> <li>All tests passing</li> <li>Follows code style guidelines</li> <li>Updates documentation if needed</li> </ul> <p>PR Template:</p> <pre><code>## Description\nBrief description of what this PR does.\n\n## Changes\n- Change 1\n- Change 2\n\n## Testing\nHow to test these changes.\n\n## Related Issues\nFixes #123\nRelated to #456\n\n## Checklist\n- [ ] Tests pass\n- [ ] Code follows style guidelines\n- [ ] Documentation updated\n- [ ] No breaking changes (or documented)\n</code></pre>"},{"location":"developer-guide/contributing/#debugging","title":"Debugging","text":""},{"location":"developer-guide/contributing/#enable-debug-mode","title":"Enable Debug Mode","text":"<p>In <code>site_config.json</code>:</p> <pre><code>{\n    \"developer_mode\": 1,\n    \"enable_frappe_logger\": 1\n}\n</code></pre> <p>Restart bench:</p> <pre><code>bench restart\n</code></pre>"},{"location":"developer-guide/contributing/#logging","title":"Logging","text":"<p>Use Frappe's logging:</p> <pre><code>import frappe\n\n# Info logging\nfrappe.log(\"Processing receipt: {0}\".format(receipt_id))\n\n# Error logging\nfrappe.log_error(\n    title=\"Etsy Import Error\",\n    message=frappe.get_traceback()\n)\n\n# Debug logging (when developer_mode is on)\nfrappe.logger().debug(\"Debug message\")\n</code></pre> <p>View logs:</p> <pre><code>tail -f logs/development.localhost.log\n</code></pre>"},{"location":"developer-guide/contributing/#using-pdb","title":"Using pdb","text":"<p>Insert breakpoint:</p> <pre><code>import pdb; pdb.set_trace()\n</code></pre> <p>Or with Python 3.7+:</p> <pre><code>breakpoint()\n</code></pre>"},{"location":"developer-guide/contributing/#browser-devtools","title":"Browser DevTools","text":"<p>For frontend debugging:</p> <ol> <li>Open browser DevTools (F12)</li> <li>Check Console for JavaScript errors</li> <li>Use Network tab to inspect API calls</li> <li>Use Sources tab to debug JavaScript</li> </ol>"},{"location":"developer-guide/contributing/#test-api-connection","title":"Test API Connection","text":"<p><pre><code>bench --site [site-name] console\n</code></pre> <pre><code>from etsy.api import EtsyAPI\nshop = frappe.get_doc(\"Etsy Shop\", \"Your Shop Name\")\napi = EtsyAPI(shop)\nprint(api.get(\"/application/users/me\"))  # Should return user data\nexit()\n</code></pre></p>"},{"location":"developer-guide/contributing/#check-database-state","title":"Check Database State","text":"<p><pre><code>bench --site [site-name] mariadb\n</code></pre> <pre><code>-- Count Etsy-related records\nSELECT COUNT(*) FROM `tabCustomer` WHERE etsy_customer_id IS NOT NULL;\nSELECT COUNT(*) FROM `tabSales Order` WHERE etsy_order_id IS NOT NULL;\nSELECT COUNT(*) FROM `tabEtsy Listing`;\nexit;\n</code></pre></p>"},{"location":"developer-guide/contributing/#review-scheduled-jobs","title":"Review Scheduled Jobs","text":"<p><pre><code>bench --site [site-name] console\n</code></pre> <pre><code>import frappe\njobs = frappe.get_all(\"Scheduled Job Log\",\n                       filters={\"scheduled_job_type\": [\"like\", \"%etsy%\"]},\n                       fields=[\"name\", \"status\", \"creation\"],\n                       order_by=\"creation desc\",\n                       limit=10)\nfor job in jobs:\n    print(f\"{job.creation}: {job.status}\")\nexit()\n</code></pre></p>"},{"location":"developer-guide/contributing/#getting-help","title":"Getting Help","text":""},{"location":"developer-guide/contributing/#issues-and-bugs","title":"Issues and Bugs","text":"<p>Report issues on GitHub: https://github.com/maeurerdev/erpnext-etsy/issues</p> <p>Include:</p> <ul> <li>ERPNext version</li> <li>App version (commit hash)</li> <li>Detailed error messages</li> <li>Steps to reproduce</li> <li>Expected vs. actual behavior</li> </ul>"},{"location":"getting-started/connect-api/","title":"Connect to Etsy API","text":"<p>To connect ERPNext with your Etsy Shop, you need API credentials from Etsy's Developer Portal and then authenticate via OAuth2.</p> <p>Important \u2014 Read Before Proceeding!</p> <p>Creating an Etsy Personal App requires you to be the authorized owner or designated administrator of both the Etsy shop and the ERPNext instance. Unauthorized creation of API credentials may violate Etsy's API Terms of Use and could result in permanent suspension of your Etsy account.</p> <p>By proceeding, you acknowledge that: (1) you have the authority to create API credentials for this Etsy shop, (2) you are solely responsible for the secure handling of all API keys and tokens, and (3) the authors and contributors of this software accept no liability for any account suspension, data loss, security breaches, or other damages arising from the use or misuse of this integration. This software is provided \"as is\" under the terms of the GPL-3.0 license, without warranty of any kind.</p> <p>I acknowledge the above terms \u2014 show setup guide </p>"},{"location":"getting-started/connect-api/#creating-an-etsy-personal-app","title":"Creating an Etsy Personal App","text":""},{"location":"getting-started/connect-api/#step-1-access-etsy-developer-portal","title":"Step 1: Access Etsy Developer Portal","text":"<ol> <li>Go to Etsy Developer Portal</li> <li>Sign in with your Etsy seller account</li> <li>Click Create a New App or Get Started</li> </ol>"},{"location":"getting-started/connect-api/#step-2-create-a-personal-app","title":"Step 2: Create a Personal App","text":"<ol> <li>App Name: Choose a descriptive name (e.g., \"my_erpnext\")</li> <li>Is this app for development or production?: Select based on your needs</li> <li>What's the URL for your app?: Enter your ERPNext site URL</li> <li>Tell us more: Provide a brief description of how you'll use the API</li> <li>Terms of Use: Review and agree to Etsy's API Terms</li> </ol> <p>After submission, Etsy will approve your app (usually instantly for personal apps).</p> <p></p>"},{"location":"getting-started/connect-api/#step-3-get-your-api-credentials","title":"Step 3: Get Your API Credentials","text":"<p>Once your app is created:</p> <ol> <li>Navigate to your app in the Your Apps section</li> <li>Note down your Keystring (this is your CLIENT_ID)</li> <li>Note down your Shared Secret (this is your CLIENT_SECRET)</li> </ol> <p></p> <p>Keep Credentials Secure</p> <p>Never share your Shared Secret publicly. Store it securely.</p>"},{"location":"getting-started/connect-api/#step-4-enter-api-credentials","title":"Step 4: Enter API Credentials","text":"<p>In the API Credentials section:</p> <ol> <li>CLIENT_ID: Paste your Etsy Keystring</li> <li>CLIENT_SECRET: Paste your Etsy Shared Secret</li> <li>Use localhost: Check this only if running ERPNext locally (self-hosted)</li> </ol> <p>The Redirect URI field is automatically generated. You'll need this in the next step.</p> <p></p>"},{"location":"getting-started/connect-api/#step-5-save-the-document","title":"Step 5: Save the Document","text":"<p>Click Save to save your Etsy Shop configuration.</p>"},{"location":"getting-started/connect-api/#step-6-set-redirect-uri-on-etsy-developer-portal","title":"Step 6: Set Redirect URI on Etsy Developer Portal","text":"<ol> <li>Copy the Redirect URI from your Etsy Shop document</li> <li>Go back to your Etsy Personal App</li> <li>Under your app's kebab menu, click Edit callback URLs </li> <li>Paste the Redirect URI from ERPNext </li> <li>Save the changes</li> </ol>"},{"location":"getting-started/connect-api/#authenticating-with-etsy","title":"Authenticating with Etsy","text":""},{"location":"getting-started/connect-api/#step-1-initiate-oauth-flow","title":"Step 1: Initiate OAuth Flow","text":"<ol> <li>In your saved Etsy Shop document, click the Login button </li> <li>You'll be redirected to Etsy's authorization page</li> <li>Review the permissions requested</li> <li>Click Grant Access to authorize the app</li> </ol>"},{"location":"getting-started/connect-api/#step-2-complete-authentication","title":"Step 2: Complete Authentication","text":"<p>After authorization:</p> <ol> <li>You'll be redirected back to ERPNext</li> </ol> <p>An ERPNext login prompt may show up</p> <p>Log-in with system manager account (Administrator)</p> <ol> <li>The Etsy Shop document will automatically update with:</li> <li>Access Token and Refresh Token (stored securely)</li> <li>Etsy User ID and Shop ID</li> <li>Status: Changed from \"Disconnected\" to \"Connected\"</li> <li>Expires At: Token expiration datetime</li> </ol> <p></p> <p>Authentication Complete</p> <p>Your Etsy Shop is now connected! The app will automatically refresh tokens before they expire.</p>"},{"location":"getting-started/connect-api/#next-step","title":"Next Step","text":"<p>Your shop is connected! Proceed to First Import &amp; Next Steps to import your data.</p>"},{"location":"getting-started/installation/","title":"Prerequisites &amp; Installation","text":"<p>This guide will walk you through installing the Etsy Integration app for ERPNext.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have:</p> <ul> <li>Frappe Framework and ERPNext v15 or higher installed</li> <li>Frappe Bench CLI tool installed</li> <li>System Manager role in ERPNext</li> <li>An active Etsy seller account with at least one shop</li> </ul>"},{"location":"getting-started/installation/#step-1-install-the-app","title":"Step 1: Install the App","text":"<p>Install the Etsy Integration app using the Frappe Bench CLI:</p> <pre><code># Navigate to your bench directory\ncd /path/to/your/bench\n\n# Get the app from GitHub\nbench get-app https://github.com/maeurerdev/erpnext-etsy\n\n# Install the app on your site\nbench --site your-site-name install-app etsy\n</code></pre>"},{"location":"getting-started/installation/#step-2-verify-installation","title":"Step 2: Verify Installation","text":"<p>After installation, verify that the app is active:</p> <ol> <li>Log in to your ERPNext site</li> <li>Go to Module List (via search or Home)</li> <li>You should see the Etsy module</li> </ol> <p>Alternatively, search for \"Etsy Shop\" or \"Etsy Settings\" in the Awesome Bar.</p>"},{"location":"getting-started/installation/#next-step","title":"Next Step","text":"<p>Once the app is installed, proceed to Setup Your First Etsy Shop.</p>"},{"location":"getting-started/next-steps/","title":"First Import &amp; Next Steps","text":"<p>Your Etsy shop is connected. Let's import your first data and set up automatic synchronization.</p>"},{"location":"getting-started/next-steps/#first-data-import","title":"First Data Import","text":""},{"location":"getting-started/next-steps/#import-listings","title":"Import Listings","text":"<ol> <li>In your Etsy Shop document, click Import Listings</li> <li>The app will fetch all active listings from your Etsy shop</li> <li>Check the Etsy Listing doctype to see imported listings</li> <li>Items, Item Attributes, and Item Variants will be created automatically</li> </ol>"},{"location":"getting-started/next-steps/#import-orders","title":"Import Orders","text":"<ol> <li>In your Etsy Shop document, click Import Receipts</li> <li>The app will import recent orders from Etsy</li> <li>For each order, the app creates:</li> <li>Customer (if new)</li> <li>Contact (with shipping/billing addresses)</li> <li>Sales Order (with line items)</li> <li>Sales Invoice (if payment is complete)</li> <li>Payment Entry (if payment is complete)</li> </ol>"},{"location":"getting-started/next-steps/#import-historical-orders","title":"Import Historical Orders","text":"<p>To import orders from a specific date range:</p> <ol> <li>Click Import Historic Receipts button</li> <li>Enter a From Date (how far back to import)</li> <li>Click Import</li> <li>The app will bulk import all orders since that date</li> </ol> <p></p> <p>Initial Import Recommendation</p> <p>For your first import, consider importing 30-90 days of historical data to establish a baseline.</p>"},{"location":"getting-started/next-steps/#enabling-automatic-synchronization","title":"Enabling Automatic Synchronization","text":""},{"location":"getting-started/next-steps/#step-1-open-etsy-settings","title":"Step 1: Open Etsy Settings","text":"<ol> <li>Search for Etsy Settings in the Awesome Bar</li> <li>This is a singleton doctype (only one instance)</li> </ol>"},{"location":"getting-started/next-steps/#step-2-enable-synchronization","title":"Step 2: Enable Synchronization","text":"<ol> <li>Check Enable Synchronisation</li> <li>Configure sync intervals:</li> <li>Sales Order Sync Interval: In minutes (default: 5, range: 1-60)</li> <li>Item Sync Interval: In hours (default: 24, range: 1-24)</li> <li>Click Save</li> </ol> <p>The app will automatically create Scheduled Job Types and start syncing in the background.</p> <p></p>"},{"location":"getting-started/next-steps/#step-3-monitor-sync-status","title":"Step 3: Monitor Sync Status","text":"<p>Back in Etsy Settings, you can view:</p> <ul> <li>Last Sync: Timestamp of last successful sync</li> <li>Next Sync: When the next sync is scheduled</li> <li>Scheduler Link: Link to the Scheduled Job Type</li> </ul> <p>Disable Sync Temporarily</p> <p>Set sync interval to <code>0</code> to disable automatic sync for that data type.</p>"},{"location":"getting-started/next-steps/#quick-reference","title":"Quick Reference","text":""},{"location":"getting-started/next-steps/#etsy-shop-buttons","title":"Etsy Shop Buttons","text":"Button Action Login Start OAuth2 authentication flow Disconnect Revoke tokens and disconnect shop Import Listings Fetch all active listings Import Receipts Import recent orders Import Historic Receipts Bulk import orders from date"},{"location":"getting-started/next-steps/#default-naming-series","title":"Default Naming Series","text":"DocType Default Pattern Customer <code>EtsyUser-{ETSY_BUYER_ID}</code> Sales Order <code>EtsyOrder-{ETSY_ORDER_ID}</code> Sales Invoice <code>EtsyInvoice-{ETSY_ORDER_ID}</code> <p>Customizable Naming</p> <p>All naming series can be customized in the Etsy Shop document.</p>"},{"location":"getting-started/next-steps/#common-commands","title":"Common Commands","text":"<pre><code># Uninstall the app\nbench --site your-site-name uninstall-app etsy --no-backup\n\n# Reinstall after updates\nbench --site your-site-name migrate\n\n# Run tests\nbench --site your-site-name run-tests --app etsy\n\n# Build assets after changes\nbench build --app etsy\n</code></pre>"},{"location":"getting-started/next-steps/#whats-next","title":"What's Next?","text":"<p>Now that you're up and running, explore the User Guide for deeper configuration:</p> <ul> <li>Shop Configuration \u2014 All Etsy Shop doctype fields and options</li> <li>Listings &amp; Items \u2014 How listings become Items in ERPNext</li> <li>Orders &amp; Customers \u2014 Sales Order sync details and edge cases</li> <li>Synchronization \u2014 Manual vs automatic sync, scheduling, and monitoring</li> <li>Troubleshooting \u2014 Common issues and solutions</li> </ul>"},{"location":"getting-started/setup-shop/","title":"Setup Your First Etsy Shop","text":"<p>Create and configure an Etsy Shop document in ERPNext.</p>"},{"location":"getting-started/setup-shop/#step-1-create-etsy-shop-document","title":"Step 1: Create Etsy Shop Document","text":"<ol> <li>In ERPNext, search for Etsy Shop in the Awesome Bar</li> <li>Click New to create a new Etsy Shop document </li> <li>Enter your Shop Name (any descriptive name, e.g., \"My Etsy Store\")</li> </ol>"},{"location":"getting-started/setup-shop/#step-2-configure-erp-settings","title":"Step 2: Configure ERP Settings","text":"<p>Configure how ERPNext should handle Etsy data:</p>"},{"location":"getting-started/setup-shop/#company-language","title":"Company &amp; Language","text":"<ul> <li>Company: Select the ERPNext company for this shop</li> <li>Language: (Optional) Set language for data formatting</li> </ul>"},{"location":"getting-started/setup-shop/#sales-order-invoice-settings","title":"Sales Order &amp; Invoice Settings","text":"<ul> <li>Sales Order Naming Series: Default is <code>EtsyOrder-{ETSY_ORDER_ID}</code></li> <li>Use <code>{ETSY_ORDER_ID}</code> as placeholder</li> <li>Sales Invoice Naming Series: Default is <code>EtsyInvoice-{ETSY_ORDER_ID}</code></li> <li>Sales Tax Account: Required \u2014 Select account for product taxes</li> <li>Shipping Tax Account: Required \u2014 Select account for shipping taxes</li> <li>Bank Account for physical sales: Required \u2014 Account for physical product payments</li> <li>Bank Account for digital sales: Required \u2014 Account for digital product payments</li> </ul>"},{"location":"getting-started/setup-shop/#customer-settings","title":"Customer Settings","text":"<ul> <li>Customer Naming Series: Default is <code>EtsyUser-{ETSY_BUYER_ID}</code></li> <li>Use <code>{ETSY_BUYER_ID}</code> as placeholder</li> <li>Example: <code>Etsy-.YYYY.-{ETSY_BUYER_ID}</code> for year-based naming</li> <li>Customer Group: (Optional) Assign a default customer group</li> </ul>"},{"location":"getting-started/setup-shop/#item-settings","title":"Item Settings","text":"<ul> <li>Item Group: (Optional) Default item group for imported listings</li> <li>Default Unit of Measure: (Optional) Default UOM for items (can be set per listing)</li> </ul>"},{"location":"getting-started/setup-shop/#step-3-save-the-document","title":"Step 3: Save the Document","text":"<p>Click Save to save your Etsy Shop configuration.</p>"},{"location":"getting-started/setup-shop/#next-step","title":"Next Step","text":"<p>Now proceed to Connect to Etsy API to authenticate your shop.</p>"},{"location":"user-guide/custom-fields/","title":"Custom Fields &amp; Data Mapping","text":"<p>The app adds read-only custom fields to standard ERPNext doctypes for linking Etsy data, and maps Etsy fields to ERPNext documents during import.</p>"},{"location":"user-guide/custom-fields/#custom-fields-on-standard-doctypes","title":"Custom Fields on Standard Doctypes","text":""},{"location":"user-guide/custom-fields/#customer","title":"Customer","text":"Field Type Unique Description Etsy Customer ID Data Yes Etsy Buyer User ID. Used to match existing customers. <p>Appears after the \"Naming Series\" field. Prevents duplicate customer creation for the same Etsy buyer.</p>"},{"location":"user-guide/custom-fields/#contact","title":"Contact","text":"Field Type Unique Description Etsy Customer ID Data Yes Etsy Buyer User ID. Links contact to Etsy buyer. <p>Appears after \"Company Name\". Links the contact to the corresponding Etsy customer.</p>"},{"location":"user-guide/custom-fields/#sales-order","title":"Sales Order","text":"Field Type Unique Description Etsy Order ID Data Yes Etsy Receipt ID (transaction ID). <p>Appears after \"Naming Series\". Prevents duplicate Sales Orders for the same Etsy transaction.</p> <p></p>"},{"location":"user-guide/custom-fields/#sales-invoice","title":"Sales Invoice","text":"Field Type Unique Description Etsy Order ID Data Yes Etsy Receipt ID. Links invoice to Etsy order. <p>Appears after \"Naming Series\". Links the invoice to the corresponding Etsy transaction.</p>"},{"location":"user-guide/custom-fields/#item","title":"Item","text":"Field Type Unique Description Etsy Product ID Data Yes Etsy Product ID (variant-specific identifier). Etsy Listing Link No Links to the Etsy Listing doctype. <p>Appears after \"Naming Series\". Links the item to its Etsy listing and prevents duplicates.</p>"},{"location":"user-guide/custom-fields/#item-attribute","title":"Item Attribute","text":"Field Type Unique Description Etsy Listing Link No Links to the Etsy Listing doctype. Etsy Property ID Data No Etsy's internal property ID (e.g., property ID for \"Color\"). <p>Appears after \"Numeric Values\". Links item attributes back to their Etsy listing.</p>"},{"location":"user-guide/custom-fields/#data-mapping","title":"Data Mapping","text":"<p>How Etsy data maps to ERPNext documents during import.</p>"},{"location":"user-guide/custom-fields/#customer-mapping","title":"Customer Mapping","text":"Etsy Field ERPNext Field Buyer User ID <code>etsy_customer_id</code> (custom field) Buyer Name Customer Name (from naming series) - Customer Group (from Etsy Shop config) - Language (from Etsy Shop config)"},{"location":"user-guide/custom-fields/#contact-mapping","title":"Contact Mapping","text":"Etsy Field ERPNext Field Buyer Email Email Buyer Name Full Name Shipping Name Address Line 1 (in Address doctype) Shipping Address1 Address Line 2 Shipping City City Shipping State State Shipping Zip Postal Code Shipping Country Country"},{"location":"user-guide/custom-fields/#sales-order-mapping","title":"Sales Order Mapping","text":"Etsy Field ERPNext Field Receipt ID <code>etsy_order_id</code> (custom field) Create Timestamp Transaction Date Buyer User ID Customer (matched via <code>etsy_customer_id</code>) Grandtotal Grand Total Line Items Sales Order Items (multiple rows) Sales Tax Taxes and Charges (sales tax account) Shipping Cost Sales Order Item (separate row for shipping)"},{"location":"user-guide/custom-fields/#item-mapping","title":"Item Mapping","text":"Etsy Field ERPNext Field Product ID <code>etsy_product_id</code> (custom field) Listing ID <code>etsy_listing</code> (custom field, link) Title Item Name Description Description Price Standard Rate Quantity Stock UOM (if maintain stock) Primary Image Image"},{"location":"user-guide/limitations/","title":"Limitations","text":"<p>Current limitations of the Etsy Integration.</p>"},{"location":"user-guide/limitations/#read-only-integration","title":"Read-Only Integration","text":"<ul> <li>No write-back: Changes in ERPNext are not pushed to Etsy</li> <li>Inventory updates in ERPNext don't sync to Etsy</li> <li>Pricing changes don't update Etsy listings</li> </ul>"},{"location":"user-guide/limitations/#refunds","title":"Refunds","text":"<ul> <li>Refunds are not automatically processed</li> <li>You must manually create Credit Notes in ERPNext for refunded Etsy orders</li> </ul>"},{"location":"user-guide/limitations/#order-updates","title":"Order Updates","text":"<ul> <li>Once a Sales Order is created, subsequent Etsy updates (e.g., address changes) are not synced</li> <li>You must manually update the Sales Order in ERPNext</li> </ul>"},{"location":"user-guide/limitations/#stock-sync","title":"Stock Sync","text":"<ul> <li>Stock levels are imported on initial listing import only</li> <li>No ongoing stock synchronization</li> </ul>"},{"location":"user-guide/limitations/#shipping-labels","title":"Shipping Labels","text":"<ul> <li>Shipping labels from Etsy are not imported</li> <li>Tracking numbers are not automatically synced to ERPNext</li> </ul>"},{"location":"user-guide/limitations/#multiple-currencies","title":"Multiple Currencies","text":"<ul> <li>Each Etsy Shop operates in one currency (as defined on Etsy)</li> <li>Multi-currency support depends on ERPNext configuration</li> <li>Currency conversion must be handled in ERPNext</li> </ul>"},{"location":"user-guide/listings-and-items/","title":"Listings &amp; Items","text":"<p>Import your Etsy product listings into ERPNext as Items, complete with variants and attributes.</p>"},{"location":"user-guide/listings-and-items/#listing-import-workflow","title":"Listing Import Workflow","text":"<p>When you click Import Listings in an Etsy Shop (or when automatic sync runs), the app:</p> <ol> <li>Fetches all active listings from Etsy for this shop</li> <li>For each listing:</li> <li>Creates or updates an Etsy Listing document</li> <li>Fetches inventory data (variants, pricing, stock)</li> <li>Creates/updates Item Templates and Item Variants</li> <li>Creates/updates Item Attributes</li> <li>Logs any errors to Error Log</li> </ol>"},{"location":"user-guide/listings-and-items/#what-gets-imported","title":"What Gets Imported","text":""},{"location":"user-guide/listings-and-items/#etsy-listing-document","title":"Etsy Listing Document","text":"<p>One Etsy Listing document per active listing on Etsy. Stores listing metadata:</p> <ul> <li>Title, description</li> <li>Status (Active, Inactive, Sold Out, etc.)</li> <li>Primary image</li> <li>Views and likes count</li> <li>Inventory data (JSON)</li> <li>Configuration for Item creation</li> </ul>"},{"location":"user-guide/listings-and-items/#item-templates-for-listings-with-variants","title":"Item Templates (for listings with variants)","text":"<ul> <li>Created if the listing has multiple variants (e.g., different sizes or colors)</li> <li>Named according to the configured Item Name in Etsy Listing</li> <li>Linked to the configured Item Group</li> <li>Has variant attributes defined</li> </ul>"},{"location":"user-guide/listings-and-items/#item-variants","title":"Item Variants","text":"<ul> <li>One Item Variant per product offering</li> <li>Named with variant attribute values (e.g., <code>T-Shirt-Red-Large</code>)</li> <li>Pricing set based on Etsy inventory data</li> <li>Stock levels can be synced (if Maintain Stock is enabled)</li> <li>Unique <code>etsy_product_id</code> links it to Etsy</li> </ul>"},{"location":"user-guide/listings-and-items/#item-attributes","title":"Item Attributes","text":"<ul> <li>Attributes like \"Color\", \"Size\", \"Material\" are created automatically</li> <li>Mapped from Etsy's property system</li> <li>Linked back to the Etsy Listing via custom fields</li> <li>Attribute values populated from all variants</li> </ul>"},{"location":"user-guide/listings-and-items/#images","title":"Images","text":"<ul> <li>Primary listing image attached to the Item or Item Template</li> <li>Variant-specific images (if available) attached to Item Variants</li> </ul>"},{"location":"user-guide/listings-and-items/#item-creation-logic","title":"Item Creation Logic","text":"<p>The app uses the following logic when creating items:</p> <pre><code>IF listing has variants:\n    CREATE Item Template with base name\n    FOR each variant:\n        CREATE Item Variant with attributes\nELSE:\n    CREATE single Item\n</code></pre>"},{"location":"user-guide/listings-and-items/#updating-existing-items","title":"Updating Existing Items","text":"<p>When re-importing a listing that already has items in ERPNext:</p> <ul> <li>Item Template/Item: Name, description, and images are updated</li> <li>Item Variants: New variants are created; existing ones are updated</li> <li>Pricing: Updated to match current Etsy prices</li> <li>Stock levels: Not automatically synced (to prevent conflicts with ERPNext inventory management)</li> </ul> <p>Manual Stock Management</p> <p>The integration does not push stock levels from ERPNext back to Etsy. Stock management is one-way (Etsy \u2192 ERPNext) and only on initial import.</p>"},{"location":"user-guide/listings-and-items/#handling-attributes","title":"Handling Attributes","text":"<p>Etsy uses a property-based system for variants (e.g., property_id 200 = \"Color\"). The integration:</p> <ol> <li>Maps Etsy property IDs to human-readable attribute names</li> <li>Creates Item Attributes in ERPNext if they don't exist</li> <li>Links attributes to the Etsy Listing via the <code>etsy_property_id</code> custom field</li> <li>Populates attribute values from all variants</li> </ol> <p>Example:</p> <p>Etsy Listing with variants: - Red, Small - Red, Large - Blue, Small - Blue, Large</p> <p>Results in: - Item Attribute \"Color\" with values: Red, Blue - Item Attribute \"Size\" with values: Small, Large - Item Template with these two attributes - 4 Item Variants</p>"},{"location":"user-guide/listings-and-items/#etsy-listing-doctype-configuration","title":"Etsy Listing Doctype Configuration","text":"<p>The Etsy Listing doctype lets you configure how each listing is handled in ERPNext.</p> <p></p>"},{"location":"user-guide/listings-and-items/#details-tab","title":"Details Tab","text":"Field Type Editable Description Listing ID Data No Etsy's unique listing identifier. Auto-populated. Status Select No Listing status: Active, Inactive, Sold Out, Draft, Expired, Edit. Image Attach Image No Primary listing image. Auto-fetched from Etsy. Etsy Shop Link No Which Etsy Shop this listing belongs to. Views Int No Number of views on Etsy. Likes Int No Number of favorites on Etsy. Title Small Text Yes Listing title from Etsy. Editable for reference. Description Text Editor Yes Listing description from Etsy. Editable for reference. Inventory Long Text No JSON representation of inventory data from Etsy. <p>Editing Restrictions</p> <p>Most fields are read-only as they're synced from Etsy. Editing Title or Description here doesn't change them on Etsy \u2014 these are for reference only.</p>"},{"location":"user-guide/listings-and-items/#settings-tab","title":"Settings Tab","text":"<p>Configure how this listing is handled in ERPNext when creating/updating Items.</p> Field Type Required Description Item Name Data Yes Base name for Item Template. Max 60 characters. Item Group Link Yes Item Group for this listing's items. Must not be a group (leaf node only). Unit of Measure Link Yes UOM for this listing's items. Maintain Stock Check Yes (default: checked) Whether to track inventory for this listing's items. <p>Item Creation Behavior:</p> <ul> <li>If the listing has variants, an Item Template is created with the Item Name</li> <li>Each variant becomes an Item Variant with a generated name (e.g., <code>ItemName-Red-Small</code>)</li> <li>If the listing has no variants, a single Item is created</li> </ul> <p>Item Group Configuration</p> <p>Choose a specific, non-group Item Group. For example, use \"Jewelry\" instead of \"Products\" if \"Products\" has child groups.</p>"},{"location":"user-guide/listings-and-items/#inventory-data","title":"Inventory Data","text":"<p>The Inventory field stores the raw JSON response from Etsy's inventory API. This includes:</p> <ul> <li>Product offerings (variants)</li> <li>Pricing information</li> <li>Stock levels</li> <li>Property values (size, color, etc.)</li> </ul> <p>This data is used internally by the app to create Item Attributes and Item Variants.</p>"},{"location":"user-guide/multi-shop/","title":"Multi-Shop Setup","text":"<p>Manage multiple Etsy shops from a single ERPNext instance.</p>"},{"location":"user-guide/multi-shop/#how-it-works","title":"How It Works","text":"<ul> <li>Create one Etsy Shop document per Etsy shop</li> <li>Each shop has:</li> <li>Independent OAuth credentials</li> <li>Separate configuration (naming series, accounts, etc.)</li> <li>Isolated synchronization (one shop's sync doesn't affect another)</li> </ul>"},{"location":"user-guide/multi-shop/#benefits","title":"Benefits","text":"<ol> <li>Centralized Management: View and manage all shops from one ERPNext instance</li> <li>Separate Accounting: Configure different accounts per shop for clean financial reporting</li> <li>Scalability: Add new shops without changing the setup</li> </ol>"},{"location":"user-guide/multi-shop/#example-setup","title":"Example Setup","text":"<pre><code>ERPNext Instance\n\u251c\u2500\u2500 Etsy Shop: \"Handmade Jewelry\"\n\u2502   \u251c\u2500\u2500 Company: My Business LLC\n\u2502   \u251c\u2500\u2500 Customer Naming: JewelryCustomer-{ETSY_BUYER_ID}\n\u2502   \u2514\u2500\u2500 Bank Account: Jewelry Etsy Account\n\u251c\u2500\u2500 Etsy Shop: \"Vintage Clothing\"\n\u2502   \u251c\u2500\u2500 Company: My Business LLC\n\u2502   \u251c\u2500\u2500 Customer Naming: VintageCustomer-{ETSY_BUYER_ID}\n\u2502   \u2514\u2500\u2500 Bank Account: Vintage Etsy Account\n</code></pre>"},{"location":"user-guide/multi-shop/#cross-shop-considerations","title":"Cross-Shop Considerations","text":"<ul> <li>Customer Matching: If the same Etsy buyer purchases from multiple shops, separate Customers are created (because naming series differ)</li> <li>To unify customers, use the same naming series and Customer Group across shops</li> <li>Item Conflicts: If two shops sell items with the same Etsy Product ID, the <code>etsy_product_id</code> unique constraint prevents conflicts</li> </ul>"},{"location":"user-guide/multi-shop/#configuration-tips","title":"Configuration Tips","text":"<ol> <li>Create separate Etsy Shop documents for each shop</li> <li>Use different naming series to distinguish orders (e.g., <code>Shop1-</code>, <code>Shop2-</code>)</li> <li>Consider using different companies or cost centers for accounting separation</li> <li>Stagger sync schedules to distribute server load</li> </ol>"},{"location":"user-guide/orders-and-customers/","title":"Orders &amp; Customers","text":"<p>Automatically import Etsy orders (receipts) into ERPNext as complete Sales Orders with all related documents.</p>"},{"location":"user-guide/orders-and-customers/#what-gets-imported","title":"What Gets Imported","text":"<p>For each Etsy order, the integration creates:</p>"},{"location":"user-guide/orders-and-customers/#1-customer","title":"1. Customer","text":"<ul> <li>Automatic creation if the Etsy Buyer ID doesn't exist</li> <li>Automatic matching if a customer with the same Etsy Customer ID already exists</li> <li>Customer name follows the configured naming series (default: <code>EtsyUser-{ETSY_BUYER_ID}</code>)</li> <li>Linked to the configured Customer Group</li> <li>Marked with unique <code>etsy_customer_id</code> custom field</li> </ul>"},{"location":"user-guide/orders-and-customers/#2-contact","title":"2. Contact","text":"<ul> <li>Created or updated for each customer</li> <li>Billing Address extracted from Etsy order</li> <li>Shipping Address extracted from Etsy order</li> <li>Phone number and email (if provided by buyer)</li> <li>Linked to the Customer via Contact link</li> </ul>"},{"location":"user-guide/orders-and-customers/#3-sales-order","title":"3. Sales Order","text":"<ul> <li>One Sales Order per Etsy receipt</li> <li>Contains all line items with:</li> <li>Correct product/variant mapping to ERPNext Items</li> <li>Quantities and pricing from Etsy</li> <li>Item descriptions</li> <li>Taxes calculated and added:</li> <li>Product sales tax (if applicable)</li> <li>Shipping tax (if applicable)</li> <li>Shipping charges added as a separate line item</li> <li>Status automatically set based on Etsy payment status</li> <li>Unique <code>etsy_order_id</code> custom field prevents duplicates</li> </ul>"},{"location":"user-guide/orders-and-customers/#4-sales-invoice","title":"4. Sales Invoice","text":"<ul> <li>Automatically created if the Etsy order is paid</li> <li>Mirrors the Sales Order line items</li> <li>Submitted automatically</li> <li>Linked to the Sales Order</li> </ul>"},{"location":"user-guide/orders-and-customers/#5-payment-entry","title":"5. Payment Entry","text":"<ul> <li>Created when payment is complete on Etsy</li> <li>Amount matches the Etsy payment total</li> <li>Posted to the configured bank account:</li> <li>Physical products \u2192 Bank Account for physical sales</li> <li>Digital products \u2192 Bank Account for digital sales</li> <li>Payment method mapped from Etsy (credit card, PayPal, etc.)</li> <li>References the Sales Invoice</li> </ul>"},{"location":"user-guide/orders-and-customers/#handling-edge-cases","title":"Handling Edge Cases","text":""},{"location":"user-guide/orders-and-customers/#partial-shipments","title":"Partial Shipments","text":"<p>If an Etsy order has multiple shipments, each shipment is tracked, but a single Sales Order is created for the entire order.</p>"},{"location":"user-guide/orders-and-customers/#refunds-and-cancellations","title":"Refunds and Cancellations","text":"<p>The integration doesn't automatically process refunds. You need to manually create credit notes in ERPNext if an Etsy order is refunded.</p>"},{"location":"user-guide/orders-and-customers/#gift-messages-and-notes","title":"Gift Messages and Notes","text":"<p>Buyer notes and gift messages from Etsy are added to the Sales Order comments/notes section.</p>"},{"location":"user-guide/orders-and-customers/#missing-items","title":"Missing Items","text":"<p>If an Etsy line item references a product that hasn't been imported as an Item:</p> <ul> <li>The integration attempts to create the item on-the-fly</li> <li>If it fails, the error is logged, and that specific order is skipped</li> <li>You can manually import the listing first, then re-import the order</li> </ul>"},{"location":"user-guide/orders-and-customers/#historical-order-import","title":"Historical Order Import","text":"<p>Bulk import orders from a specific date range to catch up on past orders.</p>"},{"location":"user-guide/orders-and-customers/#use-cases","title":"Use Cases","text":"<ul> <li>Initial Setup: Import all orders since you started selling on Etsy</li> <li>Gap Filling: If synchronization was disabled for a period, import missing orders</li> <li>Migration: When moving from another system to ERPNext</li> </ul>"},{"location":"user-guide/orders-and-customers/#how-it-works","title":"How It Works","text":"<ol> <li>Click Import Historic Receipts in an Etsy Shop document</li> <li>Enter a From Date (e.g., \"2025-01-01\")</li> <li>The app fetches all orders from that date to now</li> <li>Orders are processed in batches with pagination</li> <li>Each order creates the same documents as regular sync (Customer, Sales Order, etc.)</li> </ol>"},{"location":"user-guide/orders-and-customers/#performance-considerations","title":"Performance Considerations","text":"<ul> <li>Importing thousands of orders can take time</li> <li>The app includes rate limiting (0.25-second delay between API calls) to respect Etsy's rate limits</li> <li>Errors are logged individually \u2014 one bad order won't stop the entire import</li> <li>You can monitor progress in the ERPNext background jobs</li> </ul> <p>Chunking Large Imports</p> <p>For very large imports (&gt;1000 orders), consider importing in smaller date ranges to avoid timeouts.</p>"},{"location":"user-guide/shop-configuration/","title":"Shop Configuration","text":"<p>The Etsy Shop doctype is the main configuration point for connecting to an Etsy shop. You can create multiple Etsy Shop documents to manage multiple shops.</p> <p></p>"},{"location":"user-guide/shop-configuration/#basic-information","title":"Basic Information","text":"Field Type Description Shop Name Data Unique identifier for this shop in ERPNext. Choose any descriptive name. Status Select Read-only. Shows \"Disconnected\" or \"Connected\" based on OAuth status."},{"location":"user-guide/shop-configuration/#api-credentials-section","title":"API Credentials Section","text":"<p>These fields store your Etsy Personal App credentials.</p> Field Type Required Description CLIENT_ID Data Yes Your Etsy app's Keystring from the Etsy Developer Portal. CLIENT_SECRET Password Yes Your Etsy app's Shared Secret. Stored securely. Redirect URI Data Read-only Auto-generated OAuth callback URL. Copy this to your Etsy app settings. Use localhost Check No Enable for local development only. Uses <code>http://localhost</code> instead of your site URL. Code Verifier Data Read-only Internal OAuth2 PKCE parameter. Auto-generated during login. <p>Credential Security</p> <p>Never share your CLIENT_SECRET. It's stored as a Password field and hidden in the UI after saving.</p>"},{"location":"user-guide/shop-configuration/#connection-section","title":"Connection Section","text":"<p>These fields are automatically populated after successful OAuth authentication.</p> Field Type Description User ID Data Your Etsy User ID (numeric). Shop ID Data Your Etsy Shop ID (numeric). Access Token Password OAuth access token. Auto-refreshed before expiration. Refresh Token Password OAuth refresh token used to obtain new access tokens. Expires At Datetime When the current access token expires. Token Type Data Usually \"Bearer\". <p></p> <p>Token Refresh</p> <p>The app automatically refreshes access tokens before they expire. You don't need to manually manage tokens.</p>"},{"location":"user-guide/shop-configuration/#erp-settings-section","title":"ERP Settings Section","text":"<p>Configure how ERPNext handles data from this Etsy shop.</p>"},{"location":"user-guide/shop-configuration/#company-language","title":"Company &amp; Language","text":"Field Type Required Description Company Link Yes ERPNext company to associate with this shop. Language Link No Language for data formatting. Defaults to System Settings &gt; Language."},{"location":"user-guide/shop-configuration/#customer-settings","title":"Customer Settings","text":"Field Type Default Description Customer Naming Series Data <code>EtsyUser-{ETSY_BUYER_ID}</code> Pattern for naming new Customers. Use <code>{ETSY_BUYER_ID}</code> placeholder. Customer Group Link - Default customer group. Falls back to Selling Settings &gt; Default Customer Group. <p>Naming Series Examples:</p> <ul> <li><code>EtsyUser-{ETSY_BUYER_ID}</code> \u2192 <code>EtsyUser-123456789</code></li> <li><code>Etsy-.YYYY.-{ETSY_BUYER_ID}</code> \u2192 <code>Etsy-2026-123456789</code></li> <li>Leave blank to use Customer doctype's default naming series</li> </ul>"},{"location":"user-guide/shop-configuration/#sales-order-invoice-settings","title":"Sales Order &amp; Invoice Settings","text":"Field Type Required Default Description Sales Order Naming Series Data No <code>EtsyOrder-{ETSY_ORDER_ID}</code> Pattern for Sales Orders. Use <code>{ETSY_ORDER_ID}</code> placeholder. Sales Invoice Naming Series Data No <code>EtsyInvoice-{ETSY_ORDER_ID}</code> Pattern for Sales Invoices. Use <code>{ETSY_ORDER_ID}</code> placeholder. Sales Tax Account Link Yes - Account for product sales taxes. Shipping Tax Account Link Yes - Account for shipping taxes. Bank Account for physical sales Link Yes - Account for payments on physical products. Bank Account for digital sales Link Yes - Account for payments on digital products. <p>Separate Bank Accounts</p> <p>Etsy distinguishes between physical and digital sales. Configure separate accounts to track them differently.</p> <p>Naming Series Examples:</p> <ul> <li><code>EtsyOrder-{ETSY_ORDER_ID}</code> \u2192 <code>EtsyOrder-3456789012</code></li> <li><code>SO-.YYYY.-Etsy-{ETSY_ORDER_ID}</code> \u2192 <code>SO-2026-Etsy-3456789012</code></li> </ul>"},{"location":"user-guide/shop-configuration/#item-settings","title":"Item Settings","text":"Field Type Required Description Item Group Link No Default item group for imported listings. Falls back to Stock Settings &gt; Default Item Group. Default Unit of Measure Link No Default UOM for items. Can be overridden per listing in Etsy Listing doctype."},{"location":"user-guide/shop-configuration/#buttons-and-actions","title":"Buttons and Actions","text":"Button When Visible Action Login When disconnected Initiates OAuth2 flow to authenticate with Etsy. Disconnect When connected Revokes tokens and disconnects the shop. Import Listings When connected Fetches all active listings from Etsy and creates/updates Etsy Listing documents. Import Receipts When connected Imports recent orders (receipts) from Etsy as Sales Orders. Import Historic Receipts When connected Opens dialog to bulk import orders from a specific date."},{"location":"user-guide/shop-configuration/#configuration-best-practices","title":"Configuration Best Practices","text":""},{"location":"user-guide/shop-configuration/#security","title":"Security","text":"<ul> <li>Rotate credentials periodically by creating a new Etsy Personal App</li> <li>Restrict permissions to System Manager role only</li> <li>Backup your site before major configuration changes</li> </ul>"},{"location":"user-guide/shop-configuration/#naming-series","title":"Naming Series","text":"<ul> <li>Use unique prefixes (e.g., <code>Etsy-</code>) to distinguish Etsy orders from manual orders</li> <li>Include year for better organization: <code>Etsy-.YYYY.-{ETSY_ORDER_ID}</code></li> <li>Keep it short to avoid issues with field length limits</li> </ul>"},{"location":"user-guide/shop-configuration/#accounts-configuration","title":"Accounts Configuration","text":"<ul> <li>Separate tax accounts for sales and shipping taxes help with reporting</li> <li>Dedicated bank accounts for Etsy make reconciliation easier</li> <li>Use sub-accounts if managing multiple shops (e.g., <code>Bank - Etsy Shop 1</code>)</li> </ul>"},{"location":"user-guide/synchronization/","title":"Synchronization","text":"<p>This page explains how data synchronization works between Etsy and ERPNext.</p>"},{"location":"user-guide/synchronization/#sync-direction","title":"Sync Direction","text":"<p>The integration is one-way: Etsy \u2192 ERPNext</p> <ul> <li>Data flows from Etsy to ERPNext</li> <li>Changes in ERPNext are not pushed back to Etsy</li> <li>Etsy is the source of truth</li> </ul> <p>This design prevents accidental overwrites and keeps Etsy as your primary selling platform.</p>"},{"location":"user-guide/synchronization/#manual-synchronization","title":"Manual Synchronization","text":"<p>Trigger imports manually using buttons in the Etsy Shop doctype.</p>"},{"location":"user-guide/synchronization/#import-listings","title":"Import Listings","text":"<p>Button: <code>Import Listings</code></p> <ol> <li>Fetches all active listings from Etsy for this shop</li> <li>For each listing:</li> <li>Creates or updates an Etsy Listing document</li> <li>Fetches inventory data (variants, pricing, stock)</li> <li>Creates/updates Item Templates and Item Variants</li> <li>Creates/updates Item Attributes</li> <li>Logs any errors to Error Log</li> </ol> <p>When to Use: - After adding new products on Etsy - When product details change (pricing, descriptions, images) - Periodically to ensure ERPNext has the latest listing data</p>"},{"location":"user-guide/synchronization/#import-receipts","title":"Import Receipts","text":"<p>Button: <code>Import Receipts</code></p> <ol> <li>Fetches recent receipts (orders) from Etsy for this shop</li> <li>For each receipt:</li> <li>Creates or matches a Customer based on <code>etsy_customer_id</code></li> <li>Creates or updates a Contact with shipping/billing addresses</li> <li>Creates a Sales Order with line items</li> <li>Creates a Sales Invoice (if paid)</li> <li>Creates a Payment Entry (if paid)</li> <li>Logs any errors to Error Log</li> </ol> <p>When to Use: - After receiving new orders on Etsy - To catch up on recent orders - Before automatic sync is enabled</p>"},{"location":"user-guide/synchronization/#import-historic-receipts","title":"Import Historic Receipts","text":"<p>Button: <code>Import Historic Receipts</code></p> <ol> <li>Opens a dialog prompting for a \"From Date\"</li> <li>Fetches all receipts from that date to now</li> <li>Processes each receipt the same as \"Import Receipts\"</li> <li>Handles pagination for large date ranges</li> </ol> <p>When to Use: - Initial setup: Import all past orders - Gap filling: If sync was disabled for a period - Migration: Bringing historical data into ERPNext</p>"},{"location":"user-guide/synchronization/#automatic-synchronization","title":"Automatic Synchronization","text":"<p>Configure scheduled background jobs in Etsy Settings to automate syncing.</p>"},{"location":"user-guide/synchronization/#etsy-settings-configuration","title":"Etsy Settings Configuration","text":"<p>The Etsy Settings doctype is a singleton that controls automatic synchronization schedules.</p> Field Type Default Description Enable Synchronisation Check Unchecked Master switch to enable/disable all automatic syncing. <p>When disabled, all scheduled sync jobs are stopped. You can still manually import data via Etsy Shop buttons.</p>"},{"location":"user-guide/synchronization/#sales-order-synchronization","title":"Sales Order Synchronization","text":"Field Type Range Default Description Sync Interval Int 1-60 minutes 5 How often to sync orders. Set to <code>0</code> to disable. Last Sync Datetime Read-only - Timestamp of last successful sync. Next Sync Datetime Read-only - When the next sync will run. Scheduler Link Link Read-only - Link to the Scheduled Job Type document."},{"location":"user-guide/synchronization/#item-synchronization","title":"Item Synchronization","text":"Field Type Range Default Description Sync Interval Int 1-24 hours 24 How often to sync listings. Set to <code>0</code> to disable. Last Sync Datetime Read-only - Timestamp of last successful sync. Next Sync Datetime Read-only - When the next sync will run. Scheduler Link Link Read-only - Link to the Scheduled Job Type document."},{"location":"user-guide/synchronization/#how-scheduled-jobs-work","title":"How Scheduled Jobs Work","text":"<p>When you save Etsy Settings with synchronization enabled:</p> <ol> <li>The app creates or updates Scheduled Job Type documents</li> <li>Cron expressions are generated based on your interval settings</li> <li>ERPNext Scheduler automatically runs these jobs in the background</li> <li>Each job syncs data for all connected Etsy Shops</li> </ol> <p>Cron Calculation Examples:</p> Interval Cron Expression Meaning 5 minutes <code>*/5 * * * *</code> Every 5 minutes 15 minutes <code>*/15 * * * *</code> Every 15 minutes 1 hour <code>0 * * * *</code> Every hour at minute 0 6 hours <code>0 */6 * * *</code> Every 6 hours 24 hours <code>0 */24 * * *</code> Every 24 hours <p>Performance Consideration</p> <p>Sales orders change frequently, so a 5-minute interval is reasonable. Listings change less often, so 24 hours is sufficient for most shops.</p>"},{"location":"user-guide/synchronization/#scheduled-job-types","title":"Scheduled Job Types","text":"<p>Two Scheduled Job Types are created:</p>"},{"location":"user-guide/synchronization/#sales-order-sync-job","title":"Sales Order Sync Job","text":"<ul> <li>Function: <code>etsy.api.synchronise_receipts</code></li> <li>Frequency: Based on \"Sales Order Sync Interval\" (1-60 minutes)</li> <li>Cron Example: <code>*/5 * * * *</code> (every 5 minutes)</li> </ul> <p>Loops through all Etsy Shops with status = \"Connected\", calls <code>import_receipts()</code> on each, and logs errors per shop without stopping the entire job.</p>"},{"location":"user-guide/synchronization/#item-sync-job","title":"Item Sync Job","text":"<ul> <li>Function: <code>etsy.api.synchronise_listings</code></li> <li>Frequency: Based on \"Item Sync Interval\" (1-24 hours)</li> <li>Cron Example: <code>0 */24 * * *</code> (every 24 hours)</li> </ul> <p>Loops through all Etsy Shops with status = \"Connected\", calls <code>import_listings()</code> on each, and logs errors per shop without stopping the entire job.</p> <p></p>"},{"location":"user-guide/synchronization/#disabling-sync","title":"Disabling Sync","text":"<p>To disable synchronization:</p> <ul> <li>Globally: Uncheck \"Enable Synchronisation\" in Etsy Settings</li> <li>Per Data Type: Set sync interval to <code>0</code></li> </ul> <p>When disabled, Scheduled Job Types are updated with <code>stopped = 1</code>, preventing further execution.</p>"},{"location":"user-guide/synchronization/#monitoring","title":"Monitoring","text":"<p>In Etsy Settings: - Last Sync: Shows when the job last ran successfully - Next Sync: Shows when the job will run next - Scheduler Link: Direct link to the Scheduled Job Type</p> <p></p> <p>In Scheduled Job Type: - View the job document via the Scheduler Link - Check Last Execution timestamp - View execution logs</p> <p></p> <p>In Error Log: - All sync errors are logged with full tracebacks - Search for \"Etsy\" in Error Log to find integration-related errors</p>"},{"location":"user-guide/synchronization/#sync-behavior-details","title":"Sync Behavior Details","text":""},{"location":"user-guide/synchronization/#duplicate-prevention","title":"Duplicate Prevention","text":"<p>The integration uses unique custom fields to prevent duplicate records:</p> DocType Unique Field Purpose Customer <code>etsy_customer_id</code> Prevents duplicate customers for the same Etsy buyer Contact <code>etsy_customer_id</code> Prevents duplicate contacts Sales Order <code>etsy_order_id</code> Prevents duplicate orders for the same Etsy receipt Sales Invoice <code>etsy_order_id</code> Links invoice to order Item <code>etsy_product_id</code> Prevents duplicate items for the same Etsy product <p>How It Works: - Before creating a new document, the app checks if one with the same Etsy ID exists - If it exists, the record is updated (or skipped if no updates are needed) - If it doesn't exist, a new record is created</p>"},{"location":"user-guide/synchronization/#update-logic","title":"Update Logic","text":""},{"location":"user-guide/synchronization/#listings","title":"Listings","text":"<p>When re-importing a listing:</p> <ul> <li>Etsy Listing: Title, description, image, status, views, likes updated</li> <li>Items: Name, description, pricing updated</li> <li>Item Variants: New variants added; existing variants updated</li> <li>Item Attributes: New values added to attributes</li> </ul>"},{"location":"user-guide/synchronization/#receipts","title":"Receipts","text":"<p>When re-importing a receipt:</p> <ul> <li>If the Sales Order already exists (matched by <code>etsy_order_id</code>), it's skipped</li> <li>Orders are not updated after initial creation</li> <li>Subsequent changes on Etsy (e.g., address updates) require manual ERPNext edits</li> </ul>"},{"location":"user-guide/synchronization/#error-handling-during-sync","title":"Error Handling During Sync","text":"<p>Each record is processed in a try-except block:</p> <pre><code>for receipt in receipts:\n    try:\n        # Process receipt\n        create_customer()\n        create_sales_order()\n        create_sales_invoice()\n        create_payment_entry()\n        frappe.db.commit()  # Commit this record\n    except Exception as e:\n        frappe.db.rollback()  # Rollback only this record\n        frappe.log_error(title=f\"Etsy Sync Error: Receipt {receipt.id}\", message=traceback.format_exc())\n        continue  # Move to next record\n</code></pre> <p>This ensures:</p> <ul> <li>One bad record doesn't stop the entire sync</li> <li>Each record is atomic (all-or-nothing)</li> <li>Errors are logged for later review</li> </ul>"},{"location":"user-guide/synchronization/#rate-limiting","title":"Rate Limiting","text":"<p>To respect Etsy's API rate limits:</p> <ul> <li>Delay Between Requests: 0.25 seconds (250ms)</li> <li>Implementation: In <code>EtsyAPI.fetch_all()</code> method</li> <li>Applies To: Paginated requests (listing inventory, receipts)</li> </ul> <p>Etsy Rate Limits (as of API v3):</p> <ul> <li>10 requests per second per OAuth token</li> <li>The 250ms delay ensures ~4 requests/second, well within limits</li> </ul>"},{"location":"user-guide/synchronization/#pagination","title":"Pagination","text":"<p>Etsy API returns results in pages. The integration handles this automatically.</p> <ul> <li><code>limit</code>: Number of records per page (default: 100)</li> <li><code>offset</code>: Starting position for the page (default: 0)</li> </ul> <p>Example Flow:</p> <ol> <li>Request: <code>GET /receipts?limit=100&amp;offset=0</code> \u2192 Returns 100 receipts</li> <li>Request: <code>GET /receipts?limit=100&amp;offset=100</code> \u2192 Returns next 100 receipts</li> <li>Continue until API returns fewer than 100 receipts (last page)</li> </ol>"},{"location":"user-guide/synchronization/#performance","title":"Performance","text":""},{"location":"user-guide/synchronization/#factors-affecting-performance","title":"Factors Affecting Performance","text":"<ol> <li>Order Volume: More orders = longer sync time</li> <li>Listing Count: More listings = longer sync time</li> <li>Network Latency: Distance to Etsy's API servers</li> <li>ERPNext Load: High database load can slow down document creation</li> <li>Variant Complexity: Listings with many variants take longer to process</li> </ol>"},{"location":"user-guide/synchronization/#optimization-tips","title":"Optimization Tips","text":"<p>For High-Volume Shops:</p> <ul> <li>Increase sync interval: Use 10-15 minutes for Sales Orders instead of 5</li> <li>Stagger schedules: If managing multiple shops, offset their sync times</li> <li>Historical imports: Run during off-peak hours</li> </ul> <p>For Performance Monitoring:</p> <ul> <li>Enable RQ (Redis Queue): Use ERPNext's background job system for better performance</li> <li>Monitor Error Log: Check for recurring errors that slow down sync</li> <li>Database Indexing: Ensure custom fields (<code>etsy_*</code>) are indexed</li> </ul> <p>Background Processing</p> <p>Syncs run in the background via ERPNext Scheduler. They don't block your UI or other operations.</p>"},{"location":"user-guide/synchronization/#data-freshness","title":"Data Freshness","text":"<p>How often your data is up-to-date depends on sync intervals:</p> Sync Interval Data Freshness Use Case 1-5 minutes Near real-time High-volume shops, critical order processing 10-30 minutes Recent Moderate-volume shops, standard operations 1-6 hours Periodic Low-volume shops, non-critical updates 24 hours Daily Listings that change infrequently"},{"location":"user-guide/synchronization/#recommended-intervals","title":"Recommended Intervals","text":"<ul> <li>Sales Orders: 5-10 minutes (orders need quick processing)</li> <li>Listings: 24 hours (listings change less frequently)</li> </ul> <p>Adjust based on your shop's order volume and operational needs.</p>"},{"location":"user-guide/synchronization/#manual-vs-automatic-sync","title":"Manual vs. Automatic Sync","text":"Aspect Manual Sync Automatic Sync Trigger Button click Scheduled cron job Frequency On-demand Recurring (based on interval) User Interaction Required None (background) Use Case Immediate updates, testing Ongoing operations Error Visibility Immediate feedback Check Error Log <p>Best Practice: Use manual sync during setup and testing, then enable automatic sync for production.</p>"},{"location":"user-guide/troubleshooting/","title":"Troubleshooting","text":"<p>This guide helps you diagnose and resolve common issues with the Etsy Integration.</p>"},{"location":"user-guide/troubleshooting/#oauth-and-authentication-issues","title":"OAuth and Authentication Issues","text":""},{"location":"user-guide/troubleshooting/#error-oauth-callback-failed-or-invalid-redirect-uri","title":"Error: \"OAuth callback failed\" or \"Invalid redirect URI\"","text":"<p>Symptoms: - Clicking \"Login\" redirects to Etsy, but callback fails - Error message about redirect URI mismatch</p> <p>Causes: - Redirect URI in ERPNext doesn't match the one configured in your Etsy Personal App - Site URL is incorrect or has changed</p> <p>Solutions:</p> <ol> <li>Verify Redirect URI:</li> <li>In ERPNext: Open Etsy Shop \u2192 Copy the \"Redirect URI\" field</li> <li>In Etsy Developer Portal: Go to your app \u2192 OAuth Redirect URIs</li> <li> <p>Ensure they exactly match (including <code>http://</code> or <code>https://</code>, port numbers, trailing slashes)</p> </li> <li> <p>Update Site URL:    <pre><code>bench config dns_multitenant off\nbench --site [site-name] set-config host_name \"https://yourdomain.com\"\n</code></pre></p> </li> <li> <p>Use localhost for Development:</p> </li> <li>In Etsy Shop, check \"Use localhost\"</li> <li>Add <code>http://localhost:8000/api/method/etsy.etsy.doctype.etsy_shop.etsy_shop.oauth_callback</code> to Etsy app</li> </ol>"},{"location":"user-guide/troubleshooting/#error-access-token-expired","title":"Error: \"Access token expired\"","text":"<p>Symptoms: - API requests fail with \"401 Unauthorized\" - Etsy Shop status shows \"Connected\" but imports fail</p> <p>Causes: - Access token expired and refresh failed - Refresh token is invalid or revoked</p> <p>Solutions:</p> <ol> <li>Reconnect the Shop:</li> <li>Click \"Disconnect\" in Etsy Shop</li> <li>Click \"Login\" to re-authenticate</li> <li> <p>This generates fresh tokens</p> </li> <li> <p>Check Token Expiry:</p> </li> <li>Look at \"Expires At\" field in Etsy Shop</li> <li> <p>If it's in the past, tokens need refresh</p> </li> <li> <p>Verify OAuth Credentials:</p> </li> <li>Ensure CLIENT_ID and CLIENT_SECRET are correct</li> <li>Regenerate them in Etsy Developer Portal if needed</li> </ol>"},{"location":"user-guide/troubleshooting/#error-invalid-client-credentials","title":"Error: \"Invalid client credentials\"","text":"<p>Symptoms: - OAuth flow fails immediately - Error about invalid client_id or client_secret</p> <p>Causes: - Incorrect CLIENT_ID or CLIENT_SECRET - Credentials copied with extra spaces or characters</p> <p>Solutions:</p> <ol> <li>Re-enter Credentials:</li> <li>Go to Etsy Developer Portal \u2192 Your Apps</li> <li>Copy Keystring (CLIENT_ID) carefully</li> <li>Copy Shared Secret (CLIENT_SECRET) carefully</li> <li> <p>Paste into Etsy Shop fields, ensure no extra spaces</p> </li> <li> <p>Check App Status on Etsy:</p> </li> <li>Ensure your Etsy Personal App is active (not suspended)</li> </ol>"},{"location":"user-guide/troubleshooting/#import-issues","title":"Import Issues","text":""},{"location":"user-guide/troubleshooting/#orders-not-importing","title":"Orders Not Importing","text":"<p>Symptoms: - Click \"Import Receipts\" but no Sales Orders are created - Sync runs but order count doesn't increase</p> <p>Diagnosis Steps:</p> <ol> <li>Check Error Log:</li> <li>Go to: Home &gt; Tools &gt; Error Log</li> <li>Search for \"Etsy\" or filter by today's date</li> <li>Review error messages</li> </ol> <p></p> <ol> <li>Verify Connection:</li> <li>Open Etsy Shop document</li> <li>Check \"Status\" field shows \"Connected\"</li> <li> <p>Check \"Expires At\" is in the future</p> </li> <li> <p>Check Etsy Shop Configuration:</p> </li> <li>Ensure required fields are filled:<ul> <li>Company</li> <li>Sales Tax Account</li> <li>Shipping Tax Account</li> <li>Bank Accounts</li> </ul> </li> </ol> <p>Common Errors and Fixes:</p>"},{"location":"user-guide/troubleshooting/#account-not-found","title":"\"Account Not Found\"","text":"<ul> <li>Error: <code>Account 'Sales Tax' does not exist</code></li> <li>Fix: Set valid tax accounts in Etsy Shop \u2192 Sales Order &amp; Invoice Settings</li> </ul>"},{"location":"user-guide/troubleshooting/#customer-creation-failed","title":"\"Customer Creation Failed\"","text":"<ul> <li>Error: <code>Customer naming series not set</code></li> <li>Fix: Set Customer Naming Series in Etsy Shop \u2192 Customer Settings (or leave blank for default)</li> </ul>"},{"location":"user-guide/troubleshooting/#item-not-found","title":"\"Item Not Found\"","text":"<ul> <li>Error: <code>Item with Etsy Product ID X not found</code></li> <li>Fix: Import listings first before importing orders</li> <li>Click \"Import Listings\" in Etsy Shop</li> <li>Then retry \"Import Receipts\"</li> </ul>"},{"location":"user-guide/troubleshooting/#listings-not-importing","title":"Listings Not Importing","text":"<p>Symptoms: - Click \"Import Listings\" but no Etsy Listing documents are created - Items not created in ERPNext</p> <p>Diagnosis Steps:</p> <ol> <li>Check Active Listings on Etsy:</li> <li>Log in to Etsy \u2192 Shop Manager \u2192 Listings</li> <li>Ensure you have active listings</li> <li> <p>The integration only imports \"Active\" listings</p> </li> <li> <p>Check Error Log:</p> </li> <li>Look for \"Listing import failed\" errors</li> <li>Review specific error messages</li> </ol> <p>Common Errors and Fixes:</p>"},{"location":"user-guide/troubleshooting/#item-group-not-set","title":"\"Item Group Not Set\"","text":"<ul> <li>Error: <code>Item Group is required</code></li> <li>Fix: Set Item Group in Etsy Shop \u2192 Item Settings OR in each Etsy Listing \u2192 Settings tab</li> </ul>"},{"location":"user-guide/troubleshooting/#uom-not-found","title":"\"UOM Not Found\"","text":"<ul> <li>Error: <code>Unit of Measure 'Nos' does not exist</code></li> <li>Fix: Set a valid UOM in Etsy Shop \u2192 Item Settings OR in each Etsy Listing \u2192 Settings tab</li> </ul>"},{"location":"user-guide/troubleshooting/#invalid-item-name","title":"\"Invalid Item Name\"","text":"<ul> <li>Error: <code>Item Name exceeds maximum length</code></li> <li>Fix: Edit the Etsy Listing \u2192 Settings tab \u2192 Set a shorter Item Name (max 60 characters)</li> </ul>"},{"location":"user-guide/troubleshooting/#duplicate-records","title":"Duplicate Records","text":"<p>Symptoms: - Multiple Customers for the same Etsy buyer - Multiple Sales Orders for the same Etsy receipt</p> <p>Causes: - Custom fields not created properly during installation - Database index not applied</p> <p>Solutions:</p> <ol> <li> <p>Re-run Installation Hook:    <pre><code>bench --site [site-name] console\n</code></pre> <pre><code>from etsy.install import after_install\nafter_install()\nexit()\n</code></pre></p> </li> <li> <p>Verify Custom Fields:    <pre><code>bench --site [site-name] console\n</code></pre> <pre><code>import frappe\n# Check if etsy_customer_id field exists on Customer\nfrappe.get_all(\"Custom Field\", filters={\"dt\": \"Customer\", \"fieldname\": \"etsy_customer_id\"})\nexit()\n</code></pre></p> </li> <li> <p>Manually Remove Duplicates:</p> </li> <li>Identify duplicate records</li> <li>Merge or delete duplicates manually</li> <li>Ensure future imports don't create duplicates</li> </ol>"},{"location":"user-guide/troubleshooting/#synchronization-issues","title":"Synchronization Issues","text":""},{"location":"user-guide/troubleshooting/#automatic-sync-not-running","title":"Automatic Sync Not Running","text":"<p>Symptoms: - \"Last Sync\" timestamp in Etsy Settings doesn't update - Orders/listings not syncing automatically</p> <p>Diagnosis Steps:</p> <ol> <li> <p>Check Scheduler Status:    <pre><code>bench --site [site-name] console\n</code></pre> <pre><code>import frappe\nfrappe.get_value(\"System Settings\", None, \"scheduler_enabled\")\n# Should return 1 (enabled)\nexit()\n</code></pre></p> </li> <li> <p>Enable Scheduler (if disabled):    <pre><code>bench --site [site-name] enable-scheduler\nbench restart\n</code></pre></p> </li> <li> <p>Check Scheduled Job Types:</p> </li> <li>Go to: Home &gt; Tools &gt; Scheduled Job Type</li> <li>Search for \"Etsy\"</li> <li>Verify:<ul> <li>\"Stopped\" is unchecked</li> <li>\"Cron Format\" is set correctly</li> </ul> </li> </ol> <p></p> <p>Common Fixes:</p>"},{"location":"user-guide/troubleshooting/#scheduler-disabled","title":"Scheduler Disabled","text":"<pre><code>bench --site [site-name] enable-scheduler\nbench restart\n</code></pre>"},{"location":"user-guide/troubleshooting/#job-marked-as-stopped","title":"Job Marked as Stopped","text":"<ul> <li>Open the Scheduled Job Type document</li> <li>Uncheck \"Stopped\"</li> <li>Save</li> </ul>"},{"location":"user-guide/troubleshooting/#cron-expression-invalid","title":"Cron Expression Invalid","text":"<ul> <li>Check \"Cron Format\" field in Scheduled Job Type</li> <li>Should be like <code>*/5 * * * *</code> for 5-minute intervals</li> <li>Edit Etsy Settings and save to regenerate cron</li> </ul>"},{"location":"user-guide/troubleshooting/#sync-errors-in-error-log","title":"Sync Errors in Error Log","text":"<p>Symptoms: - Sync runs but creates errors in Error Log - Some records imported successfully, others fail</p> <p>Diagnosis: - Review Error Log entries for specific error messages - Each error is isolated to a single record</p> <p>Common Errors:</p>"},{"location":"user-guide/troubleshooting/#unique-constraint-violated","title":"\"Unique constraint violated\"","text":"<ul> <li>Error: <code>Duplicate entry 'X' for key 'etsy_order_id'</code></li> <li>Meaning: Order already exists (expected behavior)</li> <li>Action: No action needed; duplicate prevention working correctly</li> </ul>"},{"location":"user-guide/troubleshooting/#document-not-saved","title":"\"Document not saved\"","text":"<ul> <li>Error: <code>Sales Order could not be saved</code></li> <li>Meaning: Validation failed (missing required field, invalid data)</li> <li>Action: Review error message for specific field, fix configuration</li> </ul>"},{"location":"user-guide/troubleshooting/#performance-issues","title":"Performance Issues","text":""},{"location":"user-guide/troubleshooting/#slow-imports","title":"Slow Imports","text":"<p>Symptoms: - Imports take a very long time - Timeouts during large historical imports</p> <p>Causes: - Large number of records to import - Slow network connection - High database load</p> <p>Solutions:</p> <ol> <li> <p>Increase Job Timeout:    <pre><code>bench --site [site-name] set-config job_timeout 3600\nbench restart\n</code></pre></p> </li> <li> <p>Import in Batches:</p> </li> <li>For historical imports, use smaller date ranges</li> <li> <p>Instead of importing 1 year, import 1 month at a time</p> </li> <li> <p>Optimize Database:    <pre><code>bench --site [site-name] mariadb\n</code></pre> <pre><code>OPTIMIZE TABLE `tabSales Order`;\nOPTIMIZE TABLE `tabCustomer`;\nOPTIMIZE TABLE `tabItem`;\nexit;\n</code></pre></p> </li> <li> <p>Run During Off-Peak Hours:</p> </li> <li>Schedule large imports during low-traffic times</li> </ol>"},{"location":"user-guide/troubleshooting/#high-memory-usage","title":"High Memory Usage","text":"<p>Symptoms: - Server memory usage spikes during sync - Out-of-memory errors</p> <p>Solutions:</p> <ol> <li>Reduce Sync Interval:</li> <li>Smaller batches = lower memory usage</li> <li> <p>Change Sales Order interval from 5 to 10-15 minutes</p> </li> <li> <p>Increase Server Resources:</p> </li> <li>Add more RAM to your server</li> <li>Use a larger VM/instance</li> </ol>"},{"location":"user-guide/troubleshooting/#item-and-variant-issues","title":"Item and Variant Issues","text":""},{"location":"user-guide/troubleshooting/#variants-not-created","title":"Variants Not Created","text":"<p>Symptoms: - Item Template created but no Item Variants - Listing has variations on Etsy but not in ERPNext</p> <p>Diagnosis: - Check Error Log for \"Variant creation failed\" - Verify inventory data in Etsy Listing \u2192 Inventory field (JSON)</p> <p>Common Causes:</p> <ol> <li>Missing Attributes:</li> <li>Item Attributes not created properly</li> <li> <p>Fix: Manually create Item Attributes matching Etsy properties (Color, Size, etc.)</p> </li> <li> <p>Invalid Attribute Values:</p> </li> <li>Attribute values contain invalid characters</li> <li>Fix: Edit Item Attribute, clean up values</li> </ol>"},{"location":"user-guide/troubleshooting/#item-prices-not-updating","title":"Item Prices Not Updating","text":"<p>Symptoms: - Etsy prices change but ERPNext items have old prices</p> <p>Explanation: - Prices are updated only when you manually import listings or when auto-sync runs - Price updates are not pushed back to Etsy</p> <p>Solutions: - Manually click \"Import Listings\" to refresh prices - Enable automatic listing sync in Etsy Settings</p>"},{"location":"user-guide/troubleshooting/#stock-levels-out-of-sync","title":"Stock Levels Out of Sync","text":"<p>Symptoms: - Stock levels in ERPNext don't match Etsy</p> <p>Explanation: - Stock sync is one-way (Etsy \u2192 ERPNext) and only on initial import - Ongoing stock sync is not supported</p> <p>Workaround: - Manage stock on Etsy only - Use ERPNext for order processing and accounting, not inventory management - Or manually update stock levels in ERPNext after Etsy changes</p>"},{"location":"user-guide/troubleshooting/#configuration-issues","title":"Configuration Issues","text":""},{"location":"user-guide/troubleshooting/#missing-custom-fields","title":"Missing Custom Fields","text":"<p>Symptoms: - \"etsy_*\" fields not visible on Customer, Sales Order, etc. - Errors about custom fields not found</p> <p>Diagnosis: <pre><code>bench --site [site-name] console\n</code></pre> <pre><code>import frappe\nfrappe.get_all(\"Custom Field\", filters={\"fieldname\": [\"like\", \"etsy_%\"]}, pluck=\"name\")\n# Should return multiple field names\nexit()\n</code></pre></p> <p>Solutions:</p> <ol> <li> <p>Re-run Installation:    <pre><code>bench --site [site-name] console\n</code></pre> <pre><code>from etsy.install import after_install\nafter_install()\nexit()\n</code></pre></p> </li> <li> <p>Manually Create Custom Fields:</p> </li> <li>Go to: Customization &gt; Custom Field</li> <li>Create fields as defined in <code>hooks.py</code></li> </ol> <p></p> <ol> <li>Migrate Site:    <pre><code>bench --site [site-name] migrate\n</code></pre></li> </ol>"},{"location":"user-guide/troubleshooting/#naming-series-conflicts","title":"Naming Series Conflicts","text":"<p>Symptoms: - Duplicate naming series errors - Naming series not following configured pattern</p> <p>Causes: - Placeholder not used correctly - Naming series conflicts with existing series</p> <p>Solutions:</p> <ol> <li>Use Placeholders:</li> <li>For Sales Orders: <code>EtsyOrder-{ETSY_ORDER_ID}</code> (correct)</li> <li> <p>Not: <code>EtsyOrder-12345</code> (incorrect, hardcoded)</p> </li> <li> <p>Avoid Conflicts:</p> </li> <li>Don't use the same naming series for Etsy and manual orders</li> <li> <p>Use unique prefixes like <code>Etsy-</code> or <code>ETSY-SO-</code></p> </li> <li> <p>Leave Blank for Default:</p> </li> <li>If custom naming is causing issues, leave the field blank</li> <li>The integration will use the doctype's default naming series</li> </ol>"},{"location":"user-guide/troubleshooting/#api-and-network-issues","title":"API and Network Issues","text":""},{"location":"user-guide/troubleshooting/#rate-limit-errors","title":"Rate Limit Errors","text":"<p>Symptoms: - Error: \"429 Too Many Requests\" - Imports fail during large batches</p> <p>Explanation: - Etsy API has rate limits (10 requests/second per token) - The app includes built-in rate limiting (250ms delay)</p> <p>Solutions: - Wait a few minutes and retry - Rate limiting should handle this automatically - If persistent, reduce sync frequency</p>"},{"location":"user-guide/troubleshooting/#network-timeouts","title":"Network Timeouts","text":"<p>Symptoms: - Error: \"Connection timeout\" or \"Request timeout\" - Intermittent import failures</p> <p>Causes: - Slow network connection - Etsy API temporary issues</p> <p>Solutions:</p> <ol> <li>Retry Import:</li> <li>Manual imports can be retried immediately</li> <li> <p>Automatic sync will retry on next schedule</p> </li> <li> <p>Increase Timeout:    <pre><code>bench --site [site-name] set-config http_timeout 60\nbench restart\n</code></pre></p> </li> </ol>"},{"location":"user-guide/troubleshooting/#ssl-certificate-errors","title":"SSL Certificate Errors","text":"<p>Symptoms: - Error: \"SSL certificate verification failed\"</p> <p>Causes: - Outdated CA certificates on server - Firewall or proxy interfering with HTTPS</p> <p>Solutions:</p> <ol> <li> <p>Update CA Certificates:    <pre><code>sudo apt-get update\nsudo apt-get install ca-certificates\n</code></pre></p> </li> <li> <p>Check System Time:    <pre><code>date\n# Ensure system time is correct\n</code></pre></p> </li> <li> <p>Disable SSL Verification (not recommended for production):</p> </li> <li>Only as a last resort and temporary fix</li> </ol>"},{"location":"user-guide/troubleshooting/#getting-help","title":"Getting Help","text":"<p>If you've tried the solutions above and still have issues:</p> <ol> <li>Check Error Log:</li> <li>Home &gt; Tools &gt; Error Log</li> <li> <p>Look for detailed error messages and stack traces</p> </li> <li> <p>Search GitHub Issues:</p> </li> <li>Visit: https://github.com/maeurerdev/erpnext-etsy/issues</li> <li>Search for similar issues</li> <li> <p>Check closed issues for solutions</p> </li> <li> <p>Create a New Issue:</p> </li> <li>Click \"New Issue\" on GitHub</li> <li> <p>Provide:</p> <ul> <li>ERPNext version</li> <li>App version (commit hash)</li> <li>Detailed error messages from Error Log</li> <li>Steps to reproduce</li> <li>Relevant configuration (without sensitive data)</li> </ul> </li> <li> <p>Frappe Community:</p> </li> <li>Post on Frappe Forum</li> <li>Tag with \"etsy\" and \"integration\"</li> </ol>"}]}